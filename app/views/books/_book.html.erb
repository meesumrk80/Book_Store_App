<div id="books" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">

    <% @books.each do |book| %>
    <% cache book do %>
    <div class="bg-white rounded-lg shadow p-4 flex flex-col">
        <!-- Book Image -->
        <% if book.image.attached? %>
        <%= image_tag book.image, class: "w-full h-48 object-cover rounded-lg" %>
        <% else %>
        <%= image_tag "img1.jpg", class: "w-full h-48 object-cover rounded-lg" %>
        <% end %>

        <!-- Book Info -->
        <div class="mt-4 flex-1">
            <h2 class="text-lg font-semibold text-gray-800"><%= book.title %></h2>
            <% if book.categories.any? %>
            <% book.categories.each do |cat| %>
            <%= link_to cat.name + " /", category_path(cat), class: "text-sm text-gray-600" %>
            <% end %>
            <% end %>

            <div id="<%= dom_id book %>">
                <p>
                    <strong>Title:</strong>
                    <%= book.title %>
                </p>

                <p>
                    <strong>Author:</strong>
                    <%= book.author %>
                </p>

                <p>
                    <strong>Price:</strong>
                    <%= book.price %>
                </p>

                <p>
                    <strong>Stock:</strong>
                    <%= book.stock %>
                </p>

                <p>
                    <strong>Description:</strong>
                    <%= book.description %>
                </p>

            </div>

        </div>

        <!-- Actions -->
        <div class="mt-4 space-y-2">
            <%= link_to "Show this book", book,
            class: "block w-full text-center text-blue-600 hover:underline text-sm font-medium" %>

            <% if policy(book).edit? %>
            <%= link_to "Edit this book", edit_admin_book_path(book),
              class: "block w-full text-center text-yellow-600 hover:underline text-sm font-medium" %>
            <% end %>

            <% if policy(book).destroy? %>
            <%= link_to "Delete this book", book, method: :delete, data: { confirm: "Are you sure?" },
              class: "block w-full text-center text-red-600 hover:underline text-sm font-medium" %>
            <% end %>

            <% if !policy(book).create? %>
            <%= button_to "Add to Cart", add_to_cart_book_path(book), method: :post,
              class: "w-full bg-blue-600 transition delay-150 duration-300 ease-in-out hover:-translate-y-1 hover:scale-110 hover:bg-indigo-500 text-white py-2 px-4 rounded-lg hover:bg-blue-700 text-sm font-medium" %>
            <% end %>
        </div>
    </div>
    <% end %>
    <% end %>
</div>